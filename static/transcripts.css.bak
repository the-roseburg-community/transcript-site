/* ==== THEME TOKENS ==== */
html {
  /* Light (default) */
  --bg: #f6f8f3;
  --fg: #111;
  --muted: #49613b;

  --main-green: #7ea253;
  --accent: var(--main-green);
  --accent-hover: #566e33;

  --card-bg: #ffffff;
  --card-fg: #202611;
  --card-border: #e0e9d2;
  --card-shadow: #7ea25322;

  --chip-red-fg: #c23030;   --chip-red-bg: #ffffff;
  --chip-yellow-fg: #996f00;--chip-yellow-bg: #fff5cc;
  --chip-orange-fg: #b35a00;--chip-orange-bg: #ffe8d6;

  --row-red-bg: #c23030;    --row-red-fg: #fff;
  --row-yellow-bg: #ffe066; --row-yellow-fg: #222;
  --row-orange-bg: orange;  --row-orange-fg: #222;

  --t: color 120ms ease, background-color 120ms ease, border-color 120ms ease, box-shadow 120ms ease;
}

/* Dark overrides */
html[data-theme="dark"] {
  --bg: #181d14;
  --fg: #e0e7da;
  --muted: #bac8a8;

  --card-bg: #232b1c;
  --card-fg: #e0e7da;
  --card-border: #7ea25377;
  --card-shadow: #0004;

  --accent: #a9c995;
  --accent-hover: #91c36b;

  --chip-red-fg: #ffb3b3;   --chip-red-bg: #3a1117;
  --chip-yellow-fg: #fff1a1;--chip-yellow-bg: #2f2a12;
  --chip-orange-fg: #ffd199;--chip-orange-bg: #3a2413;

  --row-red-bg: #902828;    --row-red-fg: #fff;
  --row-yellow-bg: #b7ad2a; --row-yellow-fg: #232b1c;
  --row-orange-bg: #cc8400; --row-orange-fg: #232b1c;
}

/* Built-in controls */
html[data-theme="light"] { color-scheme: light; }
html[data-theme="dark"]  { color-scheme: dark; }

.note {
  text-align: center;
  font-style: italic;
  font-size: 12px;
  color: #777;
  margin: 0 0 18px 0;
}

/* ==== BASE ==== */
html, body {
  background: var(--bg);
  color: var(--fg);
  margin: 0;
  padding: 0;
  min-height: 100vh;
  transition: var(--t);
}
body {
  font-family: Arial, sans-serif;
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* Header */
.header { text-align: center; margin: 0 0 20px 0; width: 100%; }
.logo { max-width: 210px; margin: 30px auto 8px auto; display: block; }
h1 { margin: 0 0 4px 0; font-size: 2.1em; color: var(--accent); font-family: 'Segoe UI', Arial, sans-serif; letter-spacing: 0.02em; }
.subtitle { color: var(--muted); font-size: 1.09em; margin-bottom: 4px; font-style: italic; }

/* Container */
.transcript-container {
  padding: 26px 20px 18px 20px;
  border-radius: 18px;
  background-color: var(--card-bg);
  box-shadow: 0 6px 32px var(--card-shadow);
  max-width: 98vw; width: 96%;
  margin: 0 auto 24px auto;
  color: var(--card-fg);
  transition: var(--t);
}

/* List perf guards */
#transcripts { contain: content; }
.transcript {
  content-visibility: auto;
  contain: layout paint;
  contain-intrinsic-size: 200px 40px;

  margin-bottom: 14px;
  padding: 13px 13px 13px 16px;
  border: 1.5px solid var(--card-border);
  border-radius: 8px;
  background-color: var(--card-bg);  /* theme-aware */
  box-shadow: 0 2px 8px #0001;
  font-size: 1.08em;
  color: var(--card-fg);
  transition: box-shadow 0.2s, var(--t);
}
.transcript:hover { box-shadow: 0 4px 16px #0003; }

/* Row highlights */
.highlight-red    { background-color: var(--row-red-bg)    !important; color: var(--row-red-fg)    !important; }
.highlight-yellow { background-color: var(--row-yellow-bg) !important; color: var(--row-yellow-fg) !important; }
.highlight-orange { background-color: var(--row-orange-bg) !important; color: var(--row-orange-fg) !important; }

/* Inline keyword chips */
.keyword-red    { background-color: var(--chip-red-bg);    color: var(--chip-red-fg);    font-weight: bold; transition: var(--t); }
.keyword-yellow { background-color: var(--chip-yellow-bg); color: var(--chip-yellow-fg); font-weight: bold; transition: var(--t); }
.keyword-orange { background-color: var(--chip-orange-bg); color: var(--chip-orange-fg); font-weight: bold; transition: var(--t); }

/* Controls */
.copy-icon { font-size: 17px; margin-left: 14px; color: var(--accent); cursor: pointer; vertical-align: middle; transition: color 0.2s; }
.copy-icon:hover { color: var(--accent-hover); }

audio#audioPlayer {
  border-radius: 9px;
  border: 2.5px solid var(--accent);
  box-shadow: 0 2px 8px #0001;
  margin-bottom: 15px;
  width: 60%;
  display: block;
  margin-left: auto; margin-right: auto;
  background: var(--bg);
  transition: var(--t);
}

a.listen-btn {
  display: inline-block;
  background: var(--accent);
  color: #fff !important;
  border-radius: 5px;
  padding: 3px 12px;
  font-weight: bold;
  font-size: 0.98em;
  margin-left: 10px;
  text-decoration: none;
  transition: background 0.2s, color 0.2s;
  border: none;
}
a.listen-btn:hover { background: var(--accent-hover); color: #fff !important; }

a { color: var(--accent); font-weight: bold; text-decoration: none; transition: color 0.2s; }
a:hover { color: var(--accent-hover); }

/* Toggle */
.toggle-container {
  position: fixed; top: 10px; right: 10px;
  background: #f6fbe9;
  border-radius: 18px; padding: 8px 12px;
  box-shadow: 0 1px 4px #7ea25322;
  transition: var(--t);
}
html[data-theme="dark"] .toggle-container {
  background: #1b2014; color: var(--fg); box-shadow: 0 1px 4px var(--card-shadow);
}

/* Tooltip */
.tooltip {
  visibility: hidden; width: 80px; background-color: #555; color: #fff;
  text-align: center; border-radius: 5px; padding: 5px; position: absolute; z-index: 10;
  bottom: 125%; left: 50%; margin-left: -40px; opacity: 0; transition: opacity 0.3s;
}
.tooltip::after {
  content: ''; position: absolute; top: 100%; left: 50%; margin-left: -5px;
  border-width: 5px; border-style: solid; border-color: #555 transparent transparent transparent;
}

/* Mobile */
@media (max-width: 700px) {
  .transcript-container { padding: 9vw 3vw 2vw 3vw; }
  .logo { max-width: 130px; margin: 18px auto 6px auto; }
  audio#audioPlayer { width: 97%; }
  .toggle-container { position: static; width: 100%; margin-bottom: 8px; box-sizing: border-box; }
}

